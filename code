#importing the tkinter module.
import tkinter
from tkinter import *
from tkinter import messagebox
from turtle import st
#main window where everything will be displayed
main = Tk()
main.title("PHS House Event Calculator")
main.geometry("450x240")
main.configure(bg="#E5E4E2")
main.resizable(False,False)
#List to hold information
Total_event = []
#this list is mainly for the option menu
Event_name =  []
#frames for the boxes
main_frame = LabelFrame(main, background="#E5E4E2", font=("Roboto"))
main_frame.grid(row=0,column=0)
box = LabelFrame(main,background="#E5E4E2",width="1653")
box.grid(row=1,column=0)
leadboard = LabelFrame(main, background="#E5E4E2")
leadboard.grid(row= 0, column=1)

#createing lables for the entry boxes
tkinter.Label(main_frame, text ="House Event  ",background="#E5E4E2").place(x=25,y=00)
tkinter.Label(main_frame, text=" Green Points : ",fg="green",background="#E5E4E2").place(x=25,y=20)
tkinter.Label(main_frame,text=" Blue Points : ",fg="blue",background="#E5E4E2").place(x=25,y=40)
tkinter.Label(main_frame,text=" Yellow Points : ",fg="yellow",background="#E5E4E2").place(x=25,y=60)
tkinter.Label(main_frame,text=" Red Points : ",fg="red",background="#E5E4E2").place(x=25,y=80)
tkinter.Label(main_frame,text=" Is the event a sport  ",background="#E5E4E2").grid(column=0,row=6)
#createing lable for the entry boxes
name_data = tkinter.Entry(main_frame)
Green = Entry(main_frame)
Blue = Entry(main_frame)
Yellow = Entry(main_frame)
Red = Entry(main_frame)
name_data.grid(column=1,row=1)
Green.grid(column=1,row=2)
Blue.grid(column=1,row=3)
Yellow.grid(column=1,row=4)
Red.grid(column=1,row=5)
#specify if the event is a sport or not
sport_conformation = tkinter.StringVar()
sport_conformation.set("Yes")
Radiobutton(main_frame,text="True",variable=sport_conformation,value="Yes",background="#E5E4E2").place(x=130,y=96)
Radiobutton(main_frame, text= "False",variable=sport_conformation,value="No",background="#E5E4E2").place(x=180,y=96)

#this will print out the data inputed by the user of the calculator
class Details:
    def __init__(self,name,event,gr,bl,ye,rd,winner):
        self.name = name
        self.event = event
        self.gr = gr
        self.bl = bl
        self.ye = ye
        self.rd = rd
        self.winner = winner

    def data(self):
        return (["Name of the event : " + self.name , "Is  " + str(self.name) + " a sport : " + self.event , "Green points : " + str(self.gr),
                 "Blue points : " + str(self. bl), "Yellow points : " + str(self.ye), "Red points : " + str(self.rd), " Winner : " + str(self.winner)])

#this is mainly for the user to choose which event details they want to see
choice_event = tkinter.StringVar()
choice_event.set("Events")
#createing widgets
event_available = tkinter.OptionMenu(box,choice_event,Total_event)
event_available.config(background="#E5E4E2")
event_available.grid(row=0,column=1)

#creating lables for the leaderboard
def scores():
   Label(leadboard, text="Leaderboard",background="#E5E4E2").grid(column=0,row=0)
   Label(leadboard, text="Green",fg="green",background="#E5E4E2").grid(column=0,row=1),
   Label(leadboard, text="Blue",fg="blue",background="#E5E4E2").grid(column=0,row=2),
   Label(leadboard,text="Yellow",fg="yellow",background="#E5E4E2").grid(column=0,row=3),
   Label(leadboard,text="Red",fg="red",background="#E5E4E2").grid(column=0,row=4)

#this function adds all the points together
def leaderboard_V2(new_gr,new_bl,new_ye,new_rd):
    for data in Total_event:
        new_gr = new_gr + data.gr
        new_bl = new_bl + data.bl
        new_ye = new_ye + data.ye
        new_rd = new_rd + data.rd
    Label(leadboard, text=new_gr).grid(column=1,row=1)
    Label(leadboard, text=new_bl).grid(column=1,row=2,)
    Label(leadboard, text=new_ye).grid(column=1,row=3,)
    Label(leadboard,text=new_rd).grid(column=1,row=4,)
#this function takes user input
def new_function():
    #global helps to access my stringvar and optionmenu
    global choice_event
    global event_available
    name = name_data.get()
    event_new = sport_conformation.get()
    gr = int(Green.get())
    bl = int(Blue.get())
    ye = int(Yellow.get())
    rd = int(Red.get())
#testing to see if the event has already been entered
    if name.strip() != " " and name not in Event_name:
        points = [("Green",gr),("Blue ", bl),("Yellow",ye),("Red",rd)]
        points.sort(reverse=True, key=lambda x: x[1])
        #if a value is over 100 it wont be counted
        if gr > 100 or bl > 100 or ye > 100 or rd > 100:
            messagebox.showwarning("Error", "Enter a value below 100")
        else:
          check = None
          if points[0][1] == points[1][1]:
            check = True
          else:
            check = False
          if points[0][1] != 0:
            if check == True:
                winners = "Draw"
            else:
                winners = points[0],[0]
          else:
            winners = 0
          Event_name.append(str(name))
          #appends to the list
          Total_event.append(Details(name,event_new,gr,bl,ye, rd, winners))
          leaderboard_V2(0,0,0,0)
          #had to delete this otherwise it would overlap with the button as a new is made everytime we recieve new data
          event_available.destroy()
          choice_event = tkinter.StringVar()
          choice_event.set("Events")
          #had to create my option again because the old one cant access new data
          event_available = tkinter.OptionMenu(box,choice_event, *Event_name)
          event_available.config(background="#E5E4E2")
          event_available.grid(row=0,column=1)
    #if a event already exist
    elif name in Event_name:
        messagebox.showinfo("Error","This event already exist ")
#this function will basically hold all the event names of data
def details():
    events_entered = choice_event.get()
    for data in Total_event:
        if events_entered == data.name:
            global event_available
            event_available.destroy()
            event_available = tkinter.OptionMenu(box,choice_event, *Event_name)
            event_available.grid(row=10, columnspan=3)
            event_available.config(font=("Roboto",10), background="#E5E4E2")
            tkinter.messagebox.showinfo("Events","\n".join(data.data()))
#responsible for the buttons
tkinter.Button(main_frame, text="Save", command=new_function,background="#E5E4E2").grid(row=7,columnspan=5)
tkinter.Button(box, text="Show Events", command=details,background="#E5E4E2").grid(row=9,columnspan=3)
tkinter.Button(main_frame, text="Leaderboard", command=scores,background="#E5E4E2").grid(row=8,columnspan=3)

main.mainloop()













